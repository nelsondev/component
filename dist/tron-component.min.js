/*! @nelsondev/component v1.0.6 - Ultra-lightweight web component library */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TronComponent={})}(this,function(e){"use strict";const t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(e,t)=>{if(null==e)return e;if(t===Boolean)return""===e||"true"===e||!0===e;if(t===Number){const t=+e;return isNaN(t)?0:t}if(t===Array||t===Object){if("string"==typeof e)try{return JSON.parse(e)}catch{return t===Array?[]:{}}return e}return String(e)};function r(e){return{element:e,defineProps(r=[]){const o={},s={};return e._propsCache=new Map,r.forEach(e=>{const t="string"==typeof e?{name:e,type:String,default:""}:{type:String,default:"",...e};o[t.name]=t}),e.constructor.properties=o,e.constructor.observedAttributes=Object.keys(o).map(t),Object.keys(o).forEach(r=>{const i=o[r],a=t(r);Object.defineProperty(s,r,{get(){if(e._propsCache.has(r))return e._propsCache.get(r);const t=e.getAttribute(a),o=null!==t?n(t,i.type):i.default;return i.required&&null==o&&console.warn(`Required prop '${r}' is missing on ${e.tagName}`),i.validator&&!i.validator(o)&&console.warn(`Invalid prop '${r}' value:`,o),e._propsCache.set(r,o),o},set(t){if(i.validator&&!i.validator(t))return void console.warn(`Invalid prop '${r}' value:`,t);const o=n(t,i.type);e.setAttribute(a,o)}})}),e._props=s,s},defineEvent(t){const n="_evt"+e._eventCounter++,r=`${e._instanceId}_${n}`;e[n]=(...e)=>t(...e),e._eventHandlers.add({name:n,globalName:r}),window[r]=e;const o=(...t)=>e[n](...t);return o.toString=()=>{const e=t.toString().match(/^\s*(?:async\s+)?\(?([^)]*)\)?\s*=>/),o=e?e[1].trim():"";return o?o.includes(",")?`window.${r}.${n}(event)`:`(function(e){e.preventDefault();window.${r}.${n}(e)}).call(this,event)`:`window.${r}.${n}()`},o},exportEvent(t,n){const r=`${e._instanceId}_${t}`;return e[t]=(...e)=>n(...e),e._eventHandlers.add({name:t,globalName:r}),window[r]=e,e[t]},defineSlots(t=["default"]){const n={};return t.forEach(t=>{Object.defineProperty(n,t,{get:()=>(e._slotsProcessed||e._processSlots(),"default"===t?e._defaultSlotContent||"":e._namedSlots[t]||"")})}),n},defineTemplate(t){const n="function"==typeof t?t():String(t);e.innerHTML=n},defineStyle:()=>e.className||"",onMounted(t){e.addEventListener("mounted",t,{once:!0})},onUnmounted(t){e.addEventListener("unmounted",t)}}}const o=new Map,s=new Set,i=new Array;function a(e){i.push(e)}function l(e,t){if(o.has(e))return console.warn(`Component ${e} already registered`),o.get(e);class n extends HTMLElement{static properties={};constructor(){super(),this._eventHandlers=new Set,this._eventListeners=new Set,this._eventCounter=0,this._originalContent=null,this._namedSlots={},this._defaultSlotContent="",this._slotsProcessed=!1,this._isReady=!1,this._definition=t,this._instanceId=`cc_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,s.add(this)}connectedCallback(){this._captureOriginalContent(),Promise.resolve().then(()=>{const e=r(this);t.call(e,e),this.dispatchEvent(new CustomEvent("mounted")),this._isReady=!0,function(){for(const e of s)if(!e._isReady)return;readyCallbacks.forEach(e=>e()),readyCallbacks=[]}()})}disconnectedCallback(){this._eventListeners.forEach(({element:e,type:t,handler:n})=>{e.removeEventListener(t,n)}),this._eventListeners.clear(),this._eventHandlers.forEach(({name:e,globalName:t})=>{delete this[e],delete window[t]}),this._eventHandlers.clear(),this.dispatchEvent(new CustomEvent("unmounted"))}attributeChangedCallback(e,t,n){t!==n&&this._propsCache&&this._propsCache.delete(e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase()))}render(){this._propsCache&&this._propsCache.clear(),this._slotsProcessed=!1,this._captureOriginalContent();const e=r(this);this._definition.call(e,e),this.dispatchEvent(new CustomEvent("rerendered",{detail:{timestamp:Date.now()}}))}_captureOriginalContent(){this._originalContent=this.innerHTML;const e=new Map;this.querySelectorAll("*").forEach(t=>{if(t.tagName.toLowerCase().includes("-")&&!t._originalContentCaptured){const n=this._createElementKey(t);e.set(n,t.innerHTML),t._preservedSlotContent=t.innerHTML,t._originalContentCaptured=!0,t._elementKey=n}}),this._elementContentMap=e}_createElementKey(e){const t=e.tagName.toLowerCase(),n=e.parentElement,r=Array.from(n.children).filter(e=>e.tagName.toLowerCase()===t).indexOf(e),o=e.innerHTML.slice(0,50);return`${t}:${r}:${o.length}:${o.replace(/\s+/g,"")}`}_processSlots(){this._slotsProcessed||(this._extractSlots(),this._slotsProcessed=!0)}_extractSlots(){if(!this._originalContent)return this._namedSlots={},void(this._defaultSlotContent="");const e=document.createElement("div");if(e.innerHTML=this._originalContent,this._elementContentMap){e.querySelectorAll("*").forEach(t=>{if(t.tagName.toLowerCase().includes("-")){const n=this._createTempElementKey(t,e);this._elementContentMap.has(n)&&(t.innerHTML=this._elementContentMap.get(n))}})}const t={};Array.from(e.children).filter(e=>"TEMPLATE"===e.tagName&&e.hasAttribute("slot")).forEach(e=>{const n=e.getAttribute("slot");t[n]=e.innerHTML,e.remove()}),this._namedSlots=t,this._defaultSlotContent=e.innerHTML.trim()}_createTempElementKey(e,t){const n=e.tagName.toLowerCase(),r=e.parentElement||t,o=Array.from(r.children).filter(e=>e.tagName.toLowerCase()===n).indexOf(e),s=e.innerHTML.slice(0,50);return`${n}:${o}:${s.length}:${s.replace(/\s+/g,"")}`}}return customElements.define(e,n),o.set(e,n),n}const c=String.raw,d=c;"undefined"!=typeof window&&(window.defineComponent=l,window.TronComponent={defineComponent:l},window.html=c,window.template=d,window.ready=a),e.defineComponent=l,e.html=c,e.ready=a,e.template=d});
//# sourceMappingURL=tron-component.min.js.map
